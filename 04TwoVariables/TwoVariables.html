<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
  <head>
    <title>Visualising Two Variables</title>
    <meta charset="utf-8" />
    <meta name="author" content="Anastasios Panagiotelis" />
    <link href="libs/remark-css/default.css" rel="stylesheet" />
    <script src="libs/htmlwidgets/htmlwidgets.js"></script>
    <script src="libs/pymjs/pym.v1.js"></script>
    <script src="libs/widgetframe-binding/widgetframe.js"></script>
    <script src="libs/kePrint/kePrint.js"></script>
    <link rel="stylesheet" href="mtheme.css" type="text/css" />
    <link rel="stylesheet" href="mod.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Visualising Two Variables
## Data Visualisation and Analytics
### Anastasios Panagiotelis
### Lecture 4

---


class: inverse, center, middle

# Relationships



---

# Visualising two variables

- Two non-Metric variables
  - Scatter plot
- One non-metric one metric
  - Boxplots
  - Violin plots
- Two non-metric
  - Mosaic plot
  
---

# What to look for

- Outliers
- Dependence or correlation
- Remember that correlation does not imply causation!
- Non linear relationships.

---
class: inverse, middle, center

# Two metric variables

---

# Scatter plot

- For two metric variables use a scatter plot
  - One variable is represented by the `x` aesthetic
  - The other is represented by the `y` aesthetic
  - The geometry we use is `geom_point`.
- We will continue to use the `diamonds` dataset
  
---

# Scatterplot


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+geom_point()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-1-1.png" style="display: block; margin: auto;" /&gt;

---

# Changing color


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_point(color='orange')
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-2-1.png" style="display: block; margin: auto;" /&gt;

---

#Overplotting

- When using big datasets, sometimes the points cover one another or are too close.
- This is sometimes called **overplotting**.
- Some solutions:
  - Try smaller points (size)
  - Try more transparent points (alpha)
  - Try a different geom
  
---

# Changing size


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_point(size=0.1)
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-3-1.png" style="display: block; margin: auto;" /&gt;

---

# Changing alpha


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_point(alpha=0.2)
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-4-1.png" style="display: block; margin: auto;" /&gt;
---

# Changing geom


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_bin2d()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-5-1.png" style="display: block; margin: auto;" /&gt;

---

# Changing geom


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_density2d()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-6-1.png" style="display: block; margin: auto;" /&gt;

---

# Scale

- For variables that are heavily skewed it can be better to look at a log scale.
- For a regular scale you *add* as you move up the scale.
- For a log scale you *multiply* as you move up the scale.
- The log scale has the effect of putting more distance between smaller values and compressing higher values.

---


# Regular scale


```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_point()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-7-1.png" style="display: block; margin: auto;" /&gt;

---


# Log scale



```r
ggplot(data = diamonds,
       mapping = aes(x=carat,y=price))+
  geom_point()+scale_x_log10()+scale_y_log10()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-8-1.png" style="display: block; margin: auto;" /&gt;

---
class:inverse, middle, center

# An aside on log scales
---

# Zipf's Law

- In text mining, a well known empirical result is that the occurence of words in a document often follows Zipf's law

`$$\mbox{Prob}(r)=\frac{r^{-s}}{K}$$`

- Here `\(r\)` is the rank of the word (1 is the most frequent, `\(N\)` the least frequent).
- `\(K=\sum\limits^{N}_{x=1}x^{-s}\)` is constant with respect to `\(r\)`.

---

# Three documents

- We will look at three documents:
  - The Australian Constitution
  - The script of Avengers Endgame
  - The homepage of online retailer Tao Bao.

---

# Australian Constitution

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-9-1.png" style="display: block; margin: auto;" /&gt;

---

#Australian Constitution

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-10-1.png" style="display: block; margin: auto;" /&gt;

---

# Zipf Law

- Zipf's law predicts that

`$$\mbox{Pr}(r)\approx r^{-s}/K$$`

- Taking logs on both sides

`$$log(f(r))\approx -slog(r)-log(K)$$`

- Look at the plot on the log scale.

---

#Australian Constitution

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-11-1.png" style="display: block; margin: auto;" /&gt;

---
# Avengers Endgame

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-12-1.png" style="display: block; margin: auto;" /&gt;

---

#Avengers Endgame

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-13-1.png" style="display: block; margin: auto;" /&gt;

---

#Avengers Endgame

<div id="htmlwidget-9c1d94752cd2bef35c34" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-9c1d94752cd2bef35c34">{"x":{"url":"TwoVariables_files/figure-html//widgets/widget_unnamed-chunk-14.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
---
# Tao Bao

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-15-1.png" style="display: block; margin: auto;" /&gt;

---

#Tao Bao

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-16-1.png" style="display: block; margin: auto;" /&gt;

---

#Tao Bao

<div id="htmlwidget-0eaa92bc0192584cde99" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-0eaa92bc0192584cde99">{"x":{"url":"TwoVariables_files/figure-html//widgets/widget_unnamed-chunk-17.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
---

# Other applications

- A similar observation is also made for the size of companies.
- Gibrat's Law claims that the growth rate of a company is independent of its size.
- This implies that the distribution of company size will be similar to the distribution of word frequency.
- Gibrat's law has also been applied to city populations.

---
class: inverse, middle center

# Time series plots

---
# Time series plots

- When the x variable is time, it often makes more sense to join dots with a line.
- This way we can see 
  - Trend 
  - Seasonality 
  - Outliers
  - Structural break

---

# Economics dataset

- We will use the economics dataset (comes with ggplot2)


```r
str(economics)
```

```
## Classes 'tbl_df', 'tbl' and 'data.frame':	574 obs. of  6 variables:
##  $ date    : Date, format: "1967-07-01" "1967-08-01" ...
##  $ pce     : num  507 510 516 513 518 ...
##  $ pop     : int  198712 198911 199113 199311 199498 199657 199808 199920 200056 200208 ...
##  $ psavert : num  12.5 12.5 11.7 12.5 12.5 12.1 11.7 12.2 11.6 12.2 ...
##  $ uempmed : num  4.5 4.7 4.6 4.9 4.7 4.8 5.1 4.5 4.1 4.6 ...
##  $ unemploy: int  2944 2945 2958 3143 3066 3018 2878 3001 2877 2709 ...
```
- Notice date is its own type of variable

---

# Unemployed persons


```r
ggplot(economics, aes(x=date, y=unemploy))+
  geom_line()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-19-1.png" style="display: block; margin: auto;" /&gt;

---

#Terminology

- By *trend* we mean data that either tends to move upwards or downwards over time.
- By *seasonality* we tend to refer to a repeating pattern.
- By *period* we mean the number of observations for the seasonal pattern to repeat itself.
- By *frequency* we refer to how regularly an observation is measured.

---

# Your Turn

- Three datasets
  - UK driving deaths (monthly)
  - UK Gas Consumption (quarterly)
  - Returns on DAX (daily)
- For each datasets
  - Is there trend?
  - Is there seasonality?
  - If so what is the period of seasonality?
  - Are there outliers or structural breaks?
---

# UK Driving Deaths

<div id="htmlwidget-c3ffecbbde412d840d7e" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-c3ffecbbde412d840d7e">{"x":{"url":"TwoVariables_files/figure-html//widgets/widget_unnamed-chunk-20.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>

---

#UK Gas Consumption

<div id="htmlwidget-8e9441a78b6106eaf065" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-8e9441a78b6106eaf065">{"x":{"url":"TwoVariables_files/figure-html//widgets/widget_unnamed-chunk-21.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>

---

# DAX

<div id="htmlwidget-278192379479c792ee53" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-278192379479c792ee53">{"x":{"url":"TwoVariables_files/figure-html//widgets/widget_unnamed-chunk-22.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>

---

# More on time series

- Visualising time series is very common in business.
- For this reason we revisit some specific issues around time series plots later in the semester.

---
class: inverse, middle, center

# One metric and one non-metric variable

---

# Side by side plots

- When one variable is metric and the other non-metric we can easily put plots next to one another side by side.
- Simply map the non-metric variable to the x aesthetic and the metric variable to the y aesthetic.

---

# Boxplots


```r
ggplot(data = diamonds,
       mapping = aes(x=cut,y=price))+
  geom_boxplot()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-23-1.png" style="display: block; margin: auto;" /&gt;

---

# Change axes (wrong way)


```r
ggplot(data = diamonds,
       mapping = aes(x=price,y=cut))+
  geom_boxplot()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-24-1.png" style="display: block; margin: auto;" /&gt;

---

# Change axes (right way)


```r
ggplot(data = diamonds,
       mapping = aes(x=cut,y=price))+
  geom_boxplot()+coord_flip()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-25-1.png" style="display: block; margin: auto;" /&gt;

---

# Violin plot

- A violin plot is a newer visualisation.
- A kernel density is mirrored then arranged vertically.
- Specify the same way but use *geom_violin*
---

# Violin plot


```r
ggplot(data = diamonds,
       mapping = aes(x=cut,y=price))+
  geom_violin()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-26-1.png" style="display: block; margin: auto;" /&gt;

---

# Violin plot


```r
ggplot(data = diamonds,
       mapping = aes(x=cut,y=price))+
  geom_violin()+coord_flip()
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-27-1.png" style="display: block; margin: auto;" /&gt;

---

# Jittering

- A scatter plot can be used for non-metric data but can easily suffer from overplotting (one point on another). 

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-28-1.png" style="display: block; margin: auto;" /&gt;

---

#Jittering

- Add random noise by jittering


```r
ggplot(data = mpg,
       mapping = aes(x=cyl,y=cty))+
  geom_point(position = 'jitter')
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-29-1.png" style="display: block; margin: auto;" /&gt;

---
class: inverse, center middle

# Two non-metric variables

---

# Mosaic plot

- The mosaic plot is another fairly new visualisation.
- To plot them we use a new package `ggmosaic`
- The `geom_mosaic` function integrates nicely with ggplot.
- Think of it as a cross tab but where the size of the cell indicates the frequency.
---

#Diamonds cross tab

&lt;table class="table" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt;   &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; I1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SI2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; SI1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; VS2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; VS1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; VVS2 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; VVS1 &lt;/th&gt;
   &lt;th style="text-align:right;"&gt; IF &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; D &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 42 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1370 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2083 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1697 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 705 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 553 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 252 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 73 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; E &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 102 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1713 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2426 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2470 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1281 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 991 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 656 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 158 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; F &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 143 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1609 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2131 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2201 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1364 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 975 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 734 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 385 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; G &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 150 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1548 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1976 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2347 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2148 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1443 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 999 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 681 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; H &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 162 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1563 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 2275 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1643 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1169 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 608 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 585 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 299 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; I &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 92 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 912 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1424 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 1169 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 962 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 365 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 355 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 143 &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;"&gt; J &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 50 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 479 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 750 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 731 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 542 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 131 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 74 &lt;/td&gt;
   &lt;td style="text-align:right;"&gt; 51 &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;
---

# Mosiac plot


```r
ggplot(data = diamonds)+
  geom_mosaic(aes(x=product(color,clarity)))
```

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-31-1.png" style="display: block; margin: auto;" /&gt;

---

# Mosaic plot

- The specification of aes is a little unusual since this is not from the `ggplot2` package.
- To interpret the mosaic plot, the more that the horizontal gaps line up, the closer the data are to independence.

---

# Titanic

&lt;img src="titanic.jpeg" width="403" style="display: block; margin: auto;" /&gt;&lt;img src="jackrose.jpeg" width="424" style="display: block; margin: auto;" /&gt;

---

# Titanic (real data)

&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-33-1.png" style="display: block; margin: auto;" /&gt;

---

# Titanic (if independent)


&lt;img src="TwoVariables_files/figure-html/unnamed-chunk-34-1.png" style="display: block; margin: auto;" /&gt;

---

# More than two variables

- Generally interested in more than two variables.
- Next lecture we will learn to use
  - Color
  - Size
  - Labels
  - Facets
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%",
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": false
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();</script>
<script>
(function() {
  var i, text, code, codes = document.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
})();

</script>

<script>
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>

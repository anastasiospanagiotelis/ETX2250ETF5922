?dplyr
library(dplyr)
data(package='dplyr')
band_members
band_instruments
band_instruments2
band_instruments
nasa
starwars
diamonds
library(ggplot)
library(ggplot2)
diamonds
diamonds
mpg
txhousing
options(htmltools.dir.version = FALSE)
knitr::opts_chunk$set(echo = FALSE, fig.align = "center")
require(magrittr)
require(tidyverse)
require(plotly)
require(widgetframe)
require(animation)
require(DT)
require(PoEdata)
require(kableExtra)
require(gridExtra)
require(ggmosaic)
require(GGally)
txhousing%>%
group_by(year)%>%
summarise(TotalSales=sum(sales))->TotSales
TotSales
View(TotSales)
?spread
data(package='tidyr')
population
who
?who
?gather
stockss
stocks
data()
EuStockMarkets
WWWusage
airmiles
euro
swiss
head(swiss)
EuStockMarkets
EuStockMarkets
EuStockMarkets%>%as_tibble()
rownames_to_column(EuStockMarkets)
str(EuStockMarkets)
as_tibble(EuStockMarkets)
as_tibble(EuStockMarkets)%>%rownames_to_column()
AirPassengers
as_tibble(AirPassengers)
pigs
midwest
uspop
swiss
str(swiss)
head(swiss)
state
states
occupationalStatus
nottem
longley
head(longley)
freeny
head(freeny)
crimtab
library(tidyverse)
gss_c
gss_cat
midwest
pigs
nottem
nottem%>%rownames_to_column()
LifeCycleSavings
?LifeCycleSavings
Orange
economics
mpg
midwest
smiths
table1
table2
table3
table4
table4q
table4a
table4b
table5
table6
econoimcs
economics
economics_long
gather(economics,key = Variable, value = Value)->long
long
gather(economics,key = Variable, value = Value)->long
long
long
economics_long
?spread
setwd("~/Documents/Teaching/VizAn2019/04TwoVariables")
?read_hmtl
url<-'http://australianpolitics.com/constitution/text/complete'
read_html(url)
library(rvest)
read_html(url)
read_html(url)%>%html_text()->a
a
read_html(url)%>%
html_name()
read_html(url)%>%
html_nodes()
?html_node
read_html(url)%>%
html_nodes('inner')%>%
html_text()->a
a
read_html(url)%>%
html_nodes('p')->a
a[[1]]
a[[4]]
a[[5]]
a[[336]]
a[[335]]
a[[334]]
a[[335]]
a[[333]]
a[[332]]
map(a,html_text())->b
library(purrr)
map(a,html_text())->b
map(a,html_text->b
)
map(a,html_text)->b
b[[1]]
b[[2]]
b[[2]]
b[[3]]
b[[4]]
b[[336]]
b[[335]]
b[[334]]
library(magrittr)
extract(a,4:334)
?extract
a[4:334]
a[4:334]->out
magrittr::extract(a,4:334)
magrittr::extract(a,4:334)->oo
extract(a,4:334)->oo
source('~/.active-rstudio-document', echo=TRUE)
b
b[1]
b[2]
b[3]
b[4]
b[5]
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
?paste
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
AusCons
substr(AusCons,1,200)
substr(AusCons,1,200)->pp
strsplit(pp)
strsplit(pp,' ')
strsplit(AusCons)->b
strsplit(AusCons, ' ')->b
b
AusCons%>%
strsplit(' ')%>%
table->tt
tt
as_tibble(tt)
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)
as_tibble(tt)
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%View
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%
mutate(Word=`.`)->AusConsFreq
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%
mutate(Word=`.`)->AusConsFreq
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%View()
View(AusCons)
View(AusConsFreq)
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AusConsFreq#%>%View()
AusConsFreq
rename(AusConsFreq,Word=.)
rename(AusConsFreq,Word=`.`)
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%
rename(Word=`.`,Freq=n)->AusConsFreq
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%
rename(Word=.,Freq=n)->AusConsFreq
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
read_html(url)
library(purrr)
rm(list=ls())
library(tidyverse)
library(rvest)
library(purrr)
library(magrittr)
url<-'http://australianpolitics.com/constitution/text/complete'
read_html(url)%>%
html_nodes('p')%>%
magrittr::extract(4:334)%>%
map_chr(html_text)%>%
paste(collapse = ' ')->AusCons
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
AusConsFreq<-mutate(AusConsFreq,Word=.,Freq=n,Rank=1:NROW(AusConsFreq))
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AusConsFreq
AusConsFreq<-mutate(AusConsFreq,Word=.,Freq=n,Rank=1:NROW(AusConsFreq))
AusConsFreq%>%
ggplot(aes(x=Rank,y=Freq))+geom_point()
AusConsFreq<-mutate(AusConsFreq,Word=ordered(.),Freq=n,Rank=1:NROW(AusConsFreq))
AusConsFreq%>%
ggplot(aes(x=Word,y=Freq))+geom_point()
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AusConsFreq
AusConsFreq<-mutate(AusConsFreq,Word,Freq=n,Rank=1:NROW(AusConsFreq))
AusConsFreq<-mutate(AusConsFreq,Word=.,Freq=n,Rank=1:NROW(AusConsFreq))
AusConsFreq%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+geom_point()
AusConsFreq%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+
geom_point()+theme(axis.text.x = element_text(angle=90))
AusConsFreq%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+
geom_point()+theme(axis.text.x = element_text(angle=90,size = 0.1))
AusConsFreq%>%
filter(Rank<21)%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+
geom_point()+
labs(x='Word')
AusConsFreq%>%
filter(Rank<21)%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+
geom_point()+
labs(x='Word')+
theme(axis.text.x = element_text(angle=90))
AusConsFreq%>%
filter(Rank<51)%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+
geom_point()+
labs(x='Word')+
theme(axis.text.x = element_text(angle=90))
AusConsFreq%>%
filter(Rank<51)%>%
ggplot(aes(x=reorder(Word,Rank),y=Freq))+
geom_point()+
labs(x='Word')+
theme(axis.text.x = element_text(angle=90))
AusConsFreq%>%
ggplot(aes(x=Rank,y=Freq))+
geom_point()
AusConsFreq%>%
ggplot(aes(x=Rank,y=Freq))+
geom_point()+
scale_x_log10()
AusConsFreq%>%
ggplot(aes(x=Rank,y=Freq))+
geom_point()+
scale_x_log10()+
scale_y_log10()
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
#url<-'https://www.springfieldspringfield.co.uk/movie_script.php?movie=avengers-endgame'
url<-'Avengers.html'
read_html(url)%>%
html_nodes(css='.scrolling-script-container')->a
read_html(url)%>%
html_nodes(css='.scrolling-script-container')%>%
map_chr(html_text)->a
read_html(url)%>%
html_nodes(css='.scrolling-script-container')%>%
map_chr(html_text)->Avengers
Avengers%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AusConsFreq
Avengers%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AvengersFreq
View(AvengersFreq)
rm(list=ls())
library(tidyverse)
library(rvest)
library(purrr)
library(magrittr)
#url<-'http://australianpolitics.com/constitution/text/complete'
url<-'AusConstitution.html'
read_html(url)%>%
html_nodes('p')%>%
magrittr::extract(4:334)%>%
map_chr(html_text)%>%
paste(collapse = ' ')->AusCons
AusCons%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AusConsFreq
AusConsFreq%>%tail
AusConsFreq%>%tail(20)
AusConsFreq%>%tail(50)
AusConsFreq%>%tail(40)
AusConsFreq%>%View
Avengers%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
gsub("[\r\n]", "", .)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%
filter(Word %in% c('t','s'))->AvengersFreq
#url<-'https://www.springfieldspringfield.co.uk/movie_script.php?movie=avengers-endgame'
url<-'Avengers.html'
read_html(url)%>%
html_nodes(css='.scrolling-script-container')%>%
map_chr(html_text)->Avengers
Avengers%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
gsub("[\r\n]", "", .)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))%>%
filter(Word %in% c('t','s'))->AvengersFreq
Avengers%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
gsub("[\r\n]", "", .)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AvengersFreq
AusConsFreq<-mutate(AusConsFreq,
Word=.,
Freq=n,
Rank=1:NROW(AusConsFreq))%>%
filter(Word %in% c('t','s'))
View(AvengersFreq)
AvengersFreq<-mutate(AusConsFreq,
Word=.,
Freq=n,
Rank=1:NROW(AvengersFreq))%>%
filter(Word %in% c('t','s'))
AvengersFreq<-mutate(AusConsFreq,
AvengersFreq<-mutate(AvengersFreq,Word=.,Freq=n)%>%
a
''
AvengersFreq<-mutate(AvengersFreq,Word=.,Freq=n)%>%
filter(Word %in% c('t','s'))%>%
mutate(Rank=1:NROW(AvengersFreq))
Avengers%>%
tolower()%>%
gsub('[[:punct:] ]+',' ',.)%>%
gsub("[\r\n]", "", .)%>%
strsplit(' ')%>%
table%>%
as_tibble()%>%
arrange(desc(n))->AvengersFreq
AvengersFreq<-mutate(AvengersFreq,Word=.,Freq=n)%>%
filter(Word %in% c('t','s'))%>%
mutate(Rank=1:NROW(AvengersFreq))
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
AvengersFreq<-mutate(AvengersFreq,Word=.,Freq=n)%>%
filter(!(Word %in% c('t','s')))%>%
mutate(Rank=1:(NROW(AvengersFreq)-2))
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
url<-https://world.taobao.com/
read_html(url)%>%
html_nodes(css='.scrolling-script-container')%>%
map_chr(html_text)->Avengers
url<-https://world.taobao.com/
read_html(url)%>%
html_text->TaoBao
TaoBao
url<-'https://world.taobao.com/'
read_html(url)%>%
html_text->TaoBao
TaoBao
str(TaoBao)
url<-'https://world.taobao.com/'
read_html(url)%>%
html_text->TaoBao
grep("[\U4E00-\U9FFF\U3000-\U303F]", "", TaoBao)
grep("[\U4E00-\U9FFF\U3000-\U303F]", TaoBao)
grep
?grep
a<-'def'
grep("[d]",a)
grep("[^\U4E00-\U9FFF\U3000-\U303F]", TaoBao)
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", TaoBao)
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", TaoBao)%>%length()
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", TaoBao)%>%nchar()
url<-'https://world.taobao.com/'
read_html(url)%>%
html_text%>%
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", .)-> TaoBao
TaoBao
read_html(url)%>%
html_text%>%
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", .)%>%
strsplit(split = '')-> TaoBao
TaoBao[[1]]
read_html(url)%>%
html_text%>%
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", .)%>%
strsplit(split = '')%>%
magrittr::extract2(1)  table%>%
as_tibble()%>%
arrange(desc(n))-> TaoBao
View(TaoBao)
read_html(url)%>%
html_text%>%
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", .)%>%
strsplit(split = '')%>%
magrittr::extract2(1)%>%
table%>%
as_tibble()%>%
arrange(desc(n))-> TaoBao
View(TaoBao)
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
read_html(url)%>%
html_text%>%
gsub("[^\U4E00-\U9FFF\U3000-\U303F]", "", .)%>%
strsplit(split = '')%>%
magrittr::extract2(1)%>%
table%>%
as_tibble()%>%
arrange(desc(n))-> TaoBao
TaoBao<-mutate(TaoBao,Word=.,Freq=n)%>%
mutate(Rank=1:(NROW(TaoBao)-2))
View(TaoBao)
TaoBao<-mutate(TaoBao,Word=.,Freq=n)%>%
mutate(Rank=1:(NROW(TaoBao)))
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
source('~/Documents/Teaching/VizAn2019/04TwoVariables/zipf.R', echo=TRUE)
View(TaoBao)
xaringan:::inf_mr()
xaringan:::inf_mr()
